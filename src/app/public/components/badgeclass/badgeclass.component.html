<ng-template [bgAwaitPromises]="badgeIdParam">
	<!-- Embedded View -->
	<div class="l-cardembedded" *ngIf="embedService.isEmbedded">
		<div class="card card-largeimage">
			<a class="card-x-main" [href]="badgeClass.id" target="_blank">
				<div class="card-x-image">
					<img
						[loaded-src]="badgeClass.image"
						[loading-src]="badgeLoadingImageUrl"
						[error-src]="badgeFailedImageUrl"
						width="60"
						height="60"
					/>
				</div>
				<div class="card-x-text">
					<h1>{{ badgeClass.name }}</h1>
					<small>{{ issuer.name }}</small>
					<p [truncatedText]="badgeClass.description" [maxLength]="100"></p>
				</div>
			</a>
		</div>
	</div>

	<!-- Regular View -->
	<main class="o-container" *ngIf="!embedService.isEmbedded">
		<form-message></form-message>

		<div class="tw-flex tw-flex-col tw-relative">
			<div class="badge-header ">
				<!-- Badge Name -->
				<h1 class="tw-text-purple tw-max-w-[480px]">
					{{ badgeClass.name }}
				</h1>

			</div>
    		<div class="tw-flex md:tw-flex-row tw-flex-col tw-mt-4 tw-relative md:tw-mx-0 tw-mx-auto">
			<div class="badge-sidebar">
				<div class="badge-sidebar-internal">
					<div>
						<div class="tw-w-[195px] tw-h-[179px] md:tw-w-[297.86px] md:tw-h-[257px] tw-flex tw-items-center tw-bg-white tw-mx-auto tw-rounded-[20px] tw-border tw-border-solid tw-border-[var(--color-purple)] ">
							<img
								[loaded-src]="badgeClass.image"
								[loading-src]="badgeLoadingImageUrl"
								[error-src]="badgeFailedImageUrl"
								class="badge-image badgeimage-center"
							/>
						</div>
	
						<!-- Issuer Information -->
							<div class="l-flex l-flex-2x u-padding-top2x tw-mt-4 md:tw-w-[280px] tw-mx-auto tw-flex tw-items-center tw-border tw-border-solid tw-border-[var(--color-purple)] tw-pl-4 tw-py-4 tw-bg-white tw-rounded-[20px]">
								<div>
									<img
										class="issuer-image"
										[loaded-src]="issuer.image"
										[loading-src]="issuerImagePlacholderUrl"
										[error-src]="issuerImagePlacholderUrl"
									/>
								</div>
								<div class="tw-text-oebblack">
									<dt class="tw-italic">{{ 'RecBadgeDetail.issuedBy' | translate }}</dt>
									<dd class="u-text">
										<a class="u-break-word" [href]="issuer.id">{{
											issuer.name
										}}</a>
									</dd>
								</div>
							</div>
					</div>
					<dl>

					
						<div class="l-flex l-flex-2x tag-container md:tw-flex-row tw-flex-col">
							<dt class="u-text-small-bold u-text-dark2 md:tw-p-2"> Tags </dt>
							<dd class="u-text">
								<div class="l-tags">
									<div class="tag tw-max-w-24" *ngFor="let tag of badgeClass.tags; last as last">{{ tag }}</div>
								</div>
						
					</div>
						<div class="l-flex l-flex-1x tw-text-oebblack u-padding-top2x u-margin-top2x border border-top border-light3 md:tw-flex-row tw-flex-col">
							<dt
								class="u-text-small-bold"
							>
								{{ 'General.category' | translate }}
							</dt>
							<dd class="u-text-small">{{ badgeClass['extensions:CategoryExtension'].Category === 'competency' ? 'Kompetenz- Badge' : 'Teilnahme- Badge' }}</dd>
						</div>
					</dl>
				</div>
			  </div>
			</div>
			<div class="badge-detail-body">
			<div class="badge-description">
				<h2 class="tw-text-[22px] tw-leading-[26.4px] tw-font-[500] tw-font-[rubik] tw-text-oebblack u-margin-bottom2x">
					Kurzbeschreibung
				</h2>
				<p class="tw-text-xl tw-font-[rubik] tw-text-oebblack u-text-body u-width-paragraph">{{ badgeClass.description }}</p>
			</div>
				<section class="badge-competencies">
					<h3
					class="tw-text-[22px] tw-leading-[26.4px] tw-font-[500] tw-font-[rubik] tw-text-oebblack u-margin-bottom2x u-margin-top4x"
						*ngIf="badgeClass['extensions:CompetencyExtension'].length > 0"
					>
						{{ 'RecBadgeDetail.competencies' | translate}}
					</h3>
					<div>
						<div *ngFor="let competency of badgeClass['extensions:CompetencyExtension']; index as i">
							<div
								class="tw-flex tw-flex-col tw-bg-[var(--color-lightgreen)] tw-border tw-border-solid tw-border-[var(--color-purple)] tw-rounded-lg tw-mt-4 tw-w-[346px] md:tw-w-[596px]"
							>
							<div class="tw-p-4">
								<div class="tw-grid tw-grid-cols-3">
									<span class="tw-col-span-2 tw-text-[22px] tw-leading-[26.4px] tw-font-[500] tw-font-[rubik] tw-text-oebblack">{{ competency.name }}</span>
									<!-- If study load is more than 10000 hours, there is probably something wrong with the data and we should not display it. -->
									<div class="tw-flex tw-items-start tw-justify-end" *ngIf="(competency.studyLoad / 60) < 10000">
										<div class="tw-flex tw-items-center tw-gap-2 tw-px-2 tw-border tw-border-solid tw-rounded-3xl tw-border-[var(--color-purple)] tw-bg-white">
											<svg class="icon icon-dark4 tw-w-[16px] md:tw-w-[18px]" width="18px" viewBox="0 0 24 24" icon="icon_pending"></svg>
											<span class="tw-text-xs md:tw-text-lg tw-font-light">{{ getFormattedStudyLoad(competency.studyLoad) }}</span>
										</div>
									</div>
								</div>
								<div>
									<p class="u-break-word u-text-body tw-text-[20px] tw-leading-[24px] tw-font-[rubik] u-width-paragraph u-margin-top2x tw-line-clamp-3 tw-italic">{{ competency.description }}</p>
								</div>
							</div>
							</div>
						</div>
					</div>
				</section>
				
			</div>
		</div>
	</main>
</ng-template>
